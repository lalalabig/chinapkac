# 员工管理系统 v1.4.3

## 版本信息
- **版本号**: v1.4.3 FINAL
- **发布日期**: 2025-10-22
- **作者**: MiniMax Agent

## v1.4.3 更新内容

### 功能删除
1. **删除“员工地图”模块**
   - 从导航栏移除“员工地图”菜单
   - 从主页移除“员工地图”卡片
   - 原因：员工列表页面已包含地图显示

### 功能增强
1. **员工列表搜索功能**
   - 支持按用户名、姓名、邮箱、部门、职位搜索
   - 实时搜索，模糊匹配

2. **员工列表筛选功能**
   - 按任务区筛选
   - 按角色筛选（总部负责人、任务区负责人、普通员工）
   - 基于权限的智能筛选选项

3. **智能排序功能**
   - **超级管理员**：总部负责人 → 任务区（拼音） → 角色 → 姓氏（拼音）
   - **总部负责人**：任务区（拼音） → 角色 → 姓氏（拼音）
   - **任务区负责人**：姓氏（拼音）
   - 基于中文拼音的智能排序

## 从 v1.4.2 升级

### 变更文件
- `dashboard/views.py` - 增强 team_management 视图
- `templates/base.html` - 删除员工地图菜单
- `templates/dashboard/home.html` - 删除员工地图卡片
- `templates/dashboard/team_management.html` - 新增搜索筛选UI
- `requirements.txt` - 添加 pypinyin 依赖

### 升级步骤
1. 备份 `db.sqlite3`
2. 替换上述文件
3. 安装新依赖：`pip install pypinyin>=0.49.0`
4. 重启 Django 服务器
5. 清除浏览器缓存（Ctrl + F5）

## 系统特性

### 核心功能
- 多级用户角色管理（超级管理员、总部负责人、任务区经理、普通员工）
- 任务区分配与管理
- 员工信息管理（部门、职位、任务区）
- 用户创建、编辑、删除
- 角色权限控制
- **新：搜索和筛选功能**
- **新：智能排序功能**

### 数据清洗
- 内置数据清洗脚本 `cleanup_invalid_task_areas.py`
- 自动过滤无效任务区数据
- 防止无效数据在 UI 中显示

### 部署特性
- Windows 一键部署脚本
- SQLite 数据库（开箱即用）
- Django 开发服务器
- 中文支持优化
- **新：中文拼音排序支持**

## 技术栈
- Python 3.8+
- Django 4.2
- Bootstrap 5
- SQLite 3
- **新：pypinyin 0.49+**

## 支持信息
如遇到问题，请提供：
1. 错误截图
2. 操作步骤
3. 系统环境信息
4. pypinyin 安装状态
